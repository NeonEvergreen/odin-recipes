var zce=new function(){this.editorData={javaDefaults:{data:"Empty"}},this.explorerData={javaDefaults:{data:"Empty"}},this.editor=null,this.orgID=null,this.config=null,this.apihook="apihook not set",this.selectedFile=null,this.selectedNode=null,this.testarea=null,this.appDomain="",this.csrfCookieName="zfcsr",this.csrfParamName="zfreqcsr",this.oldTextContent="",this.staticDomain="https://js.zohostatic.com/zohocloud/",this.staticDomainVersion="20203003",this.explorerData=null,this.fileToBeRemoved=null,this.newFile=null,this.modelInfo={},this.stateInfo={},this.dataInfo={},this.mode=null,this.tabs=!1,this.functionName=null,this.folderName=null,this.isDirectory=null,this.openNewFile=null,this.modalHtml='<div class="zce-modal-content"><div class="zce-modal-header">  <span class="zce-modal-close" id="zceclose">&times;</span><h3>File Upload</h3><hr></div> <div class="zce-modal-body">   <input type="file" name="file" multiple="multiple" id="uploadFileButton" accept="$1">   <br/>   <br/>   <button type="button" id="submitUpload" > Upload </button> </div> <div  class="zce-modal-footer">   <h4>Restrictions: Max allowed file size is 10MB</h4> </div> </div>',this.newFileModalHtml='<div class="zce-modal-content"><div class="zce-modal-header">  <span class="zce-modal-close" id="zceclose">&times;</span> <h3>New File</h3><hr></div> <div class="zce-modal-body">    <input type="name" class="form-control" id="createNewFileName" maxlength="100" placeholder="Enter file name">  <br/>   <button type="button" id="createNewFileButton" > Create </button> </div> <div  class="zce-modal-footer"> <h4> Restrictions: Maximum allowed characters - 100 </h4>  </div> </div>'};function customSort(node1){switch(node1.substr(node1.lastIndexOf(".")+1,node1.length)){case"json":return 3;case"js":return 1;case"java":return 2;default:return 4}}function tabCreation(config){if("tabs"in config&&"true"===config.tabs){var editor_nav=document.getElementById(zce.getConfig().bindTabs),ul=document.getElementById("tabId"),li=document.createElement("li");li.className="tabInfo",li.title=zce.getSelectedFile();var file=document.createElement("span");file.className="tabDetails",file.appendChild(document.createTextNode(zce.getSelectedFile().substr(zce.getSelectedFile().lastIndexOf("/")+1)));var sp=document.createElement("span");sp.className="close-button",sp.appendChild(document.createTextNode("X")),li.appendChild(file),li.appendChild(sp),ul.appendChild(li);var myTree="#"+zce.config.bindExplorer;sp.addEventListener("click",function(e){e.stopPropagation(),tempModel=zce.modelInfo.get(li.title),null!==zce.mode||tempModel.getValue()===zce.dataInfo.get(li.title)?(zce.mode=null,tempModel.dispose(),deleteModels(li.title),$(li).remove(),$(sp).remove(),filetoBeOpened(),$(myTree).jstree().deselect_all(!0)):"saveContentCallback"in zce.getConfig()&&zce.getConfig().saveContentCallback()}),li.addEventListener("click",function(e){zce.stateInfo.set(zce.getSelectedFile(),zce.getEditor().saveViewState()),tempModel=zce.modelInfo.get(li.title),zce.getEditor().setModel(tempModel),zce.setSelectedFile(li.title),$(myTree).jstree().deselect_all(!0),getNodeId(li.title)}),editor_nav.appendChild(ul)}}function showSelectedTab(){$("ul#tabId li").each(function(){$(this).attr("title")==zce.getSelectedFile()&&(null!==document.querySelector("#tabId li.active")&&document.querySelector("#tabId li.active").classList.remove("active"),$(this).addClass("active"))})}function deleteModels(path){zce.modelInfo.delete(path),zce.stateInfo.delete(path),zce.dataInfo.delete(path)}function removeList(path){console.log("isDirectory "+zce.getIsDirectory());if(!0===zce.getIsDirectory()){var functionFileList=zce.getExplorerData().data.functionFiles;for(i=0;i<functionFileList.length;i++)functionFileList[i].fullPath.startsWith(path)&&!1===functionFileList[i].isDirectory&&(filePath=functionFileList[i].fullPath,zce.modelInfo.has(filePath)&&($("ul#tabId li").each(function(){$(this).attr("title")==filePath&&$(this).remove()}),deleteModels(filePath)));filetoBeOpened()}else $("ul#tabId li").each(function(){$(this).attr("title")==path&&(zce.mode="remove",$(this).children("span.close-button").trigger("click"))})}function bindToExecute(){"executeCallback"in zce.getConfig()?zce.getConfig().executeCallback(zce.getOrgInfo(),zce.getConfig().functionId):zce.defaultTestCallback()}function bindToUpdate(){"updateCallback"in zce.getConfig()?zce.getConfig().updateCallback(zce.getOrgInfo(),zce.getConfig().functionId):zce.defaultSaveCallback()}function getNodeId(fileName){var myTree="#"+zce.getConfig().bindExplorer,functionList=zce.getExplorerData().data.functionFiles;for(i=0;i<functionList.length;i++)functionList[i].fullPath==fileName&&$(myTree).jstree("select_node",functionList[i].id)}function filetoBeOpened(){0<zce.modelInfo.size&&(nextFileName=zce.modelInfo.keys().next().value,zce.setSelectedFile(nextFileName),zce.getFunctionFileContent(nextFileName,zce.setEditorContentCallbackToHandletabs,zce.setErrorExplorerDataCallback),getNodeId(nextFileName),zce.setSelectedFile(nextFileName))}zce.setOpenNewFile=function(fileName){this.openNewFile=fileName},zce.getOpenNewFile=function(){return this.openNewFile},zce.getSelectedFolder=function(){return this.folderName},zce.setSelectedFolder=function(name){this.folderName=name},zce.getFunctionName=function(){return this.functionName},zce.setFunctionName=function(name){this.functionName=name},zce.getNewFile=function(){return this.newFile},zce.setNewFile=function(name){this.newFile=name},zce.getFileToBeRemoved=function(){return this.fileToBeRemoved},zce.setFileToBeRemoved=function(name){this.fileToBeRemoved=name},zce.setIsDirectory=function(isDirectory){this.isDirectory=isDirectory},zce.getIsDirectory=function(){return this.isDirectory},zce.getNewFileModalHtml=function(){return this.newFileModalHtml},zce.setNewFileModalHtml=function(data){this.newFileModalHtml=data},zce.getModalHtml=function(){return this.modalHtml},zce.setModalHtml=function(data){this.modalHtml=data},zce.getOldTextContent=function(){return this.oldTextContent},zce.disposeEditor=function(){null!=zce.editor&&(zce.editor.dispose(),zce.editor=null),zce.modelInfo=null,zce.dataInfo=null,zce.stateInfo=null,(zce.explorerData=null)!=zce.config.actions.save&&null!=zce.config.actions.save.id&&null!=document.getElementById(zce.config.actions.save.id)&&(document.getElementById(zce.config.actions.save.id).onclick=null),null!=zce.config.actions.test&&null!=zce.config.actions.test.id&&null!=document.getElementById(zce.config.actions.test.id)&&(document.getElementById(zce.config.actions.test.id).onclick=null),null!=zce.config.actions.deploy&&null!=zce.config.actions.deploy.id&&null!=document.getElementById(zce.config.actions.deploy.id)&&(document.getElementById(zce.config.actions.deploy.id).onclick=null),null!=zce.config.actions.uploadFiles&&null!=zce.config.actions.uploadFiles.id&&null!=document.getElementById(zce.config.actions.uploadFiles.id)&&(document.getElementById(zce.config.actions.uploadFiles.id).onclick=null),null!=zce.config.actions.createFile&&null!=zce.config.actions.createFile.id&&null!=document.getElementById(zce.config.actions.createFile.id)&&(document.getElementById(zce.config.actions.createFile.id).onclick=null),null!=document.getElementById("createNewFileName")&&(document.getElementById("createNewFileName").keydown=null),null!=document.getElementById("zceclose")&&(document.getElementById("zceclose").onclick=null),$(document).off("keydown","*"),$("#createNewFileName").unbind("keydown"),$(".tabInfo").off("click"),$(".close-button").off("click"),$(zce.config.bindExplorer).jstree("destroy")},zce.setOldTextContent=function(data){this.oldTextContent=data},zce.getCSRFCookieName=function(){return this.csrfCookieName},zce.getCSRFParamName=function(){return this.csrfParamName},zce.getAppDomain=function(data){return this.appDomain},zce.getTestAreaObj=function(){return this.testarea},zce.setAppDomain=function(data){this.appDomain=data},zce.setSelectedFile=function(data){this.selectedFile=data},zce.setSelectedNode=function(data){this.selectedNode=data},zce.getSelectedFile=function(){return this.selectedFile},zce.getSelectedNode=function(){return this.selectedNode},zce.getDefaultConfig=function(){return{width:"100px",height:"100px"}},zce.getEditor=function(){return this.editor},zce.setEditor=function(ed){this.editor=ed},zce.errorCallback=function(jqXHR,error,errorThrown){jqXHR.status&&400==jqXHR.status?alert("success:false, ErrorMessage:"+jqXHR.responseText):alert("success:false, ErrorMessage:'Server Error...refer logs'")},zce.createXhr=function(method,url){var xhr=new XMLHttpRequest;return xhr.onerror=function(){},xhr.open(method,url,!0),xhr},zce.setEditorContentCallbackToHandletabs=function(data){var tempModel=null;if(zce.modelInfo.has(zce.getSelectedFile())){if(tempModel=zce.modelInfo.get(zce.getSelectedFile()),zce.getEditor().setModel(tempModel),zce.stateInfo.has(zce.getSelectedFile())){var s=zce.stateInfo.get(zce.getSelectedFile());zce.getEditor().restoreViewState(s)}}else(tempModel=monaco.editor.createModel("",zce.getCodeMirrorMode(zce.config.data.editor.ZCLOUDSTACKID))).setValue(data),zce.getEditor().setModel(tempModel),zce.modelInfo.set(zce.getSelectedFile(),tempModel),tabCreation(zce.config),zce.dataInfo.set(zce.getSelectedFile(),data);var myTree="#"+zce.config.bindExplorer;0===$(myTree).jstree("get_selected",!0).length&&getNodeId(zce.getSelectedFile()),zce.setOldTextContent(tempModel.getValue()),showSelectedTab(),zce.getEditor().focus(),"readyCallback"in zce.getConfig()&&zce.getConfig().readyCallback(),zce.editor.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KEY_E,bindToExecute),zce.editor.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KEY_S,bindToUpdate)},zce.setEditorContentCallback=function(data){var myTree="#"+zce.config.bindExplorer;0===$(myTree).jstree("get_selected",!0).length&&getNodeId(zce.getSelectedFile()),zce.setEditorData(data),zce.getEditor().focus(),zce.setOldTextContent(zce.getEditorData()),"readyCallback"in zce.getConfig()&&zce.getConfig().readyCallback(),zce.editor.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KEY_E,bindToExecute),zce.editor.addCommand(monaco.KeyMod.CtrlCmd|monaco.KeyCode.KEY_S,bindToUpdate)},zce.setExplorerDataCallback=function(data){"true"===zce.getConfig().tabs&&(null!==zce.getFileToBeRemoved()?(removeList(zce.getFileToBeRemoved()),zce.setFileToBeRemoved(null)):null!==zce.getNewFile()&&!0===zce.isAllowedFileExtensions(zce.getNewFile())&&(zce.getFunctionFileContent(zce.getNewFile(),"true"===zce.getConfig().tabs?zce.setEditorContentCallbackToHandletabs:zce.setEditorContentCallback,zce.setErrorEditorContentCallback),zce.setSelectedFile(zce.getNewFile()),zce.setNewFile(null))),zce.setExplorerData(data)},zce.uploadActionSuccessCallback=function(data){"hideLoading"in zce.getConfig()&&zce.getConfig().hideLoading(),zce.setFunctionFileList(zce.setExplorerDataCallback,zce.setErrorExplorerDataCallback),$("#"+zce.getUploadModalID()).fadeOut(500)},zce.removeActionSuccessCallback=function(data){zce.getFunctionFileContent(zce.getConfig().data.editor.FUNCTIONNAME+zce.getFileExtension(zce.getConfig().data.editor.ZCLOUDSTACKID),zce.setEditorContentCallback,zce.setErrorEditorContentCallback),zce.setSelectedFile(zce.getConfig().data.editor.FUNCTIONNAME+zce.getFileExtension(zce.getConfig().data.editor.ZCLOUDSTACKID)),zce.setFunctionFileList(zce.setExplorerDataCallback,zce.setErrorExplorerDataCallback),$("#"+zce.getUploadModalID()).fadeOut(500)},zce.newActionSuccessCallback=function(data){zce.setFunctionFileList(zce.setExplorerDataCallback,zce.setErrorExplorerDataCallback),$("#"+zce.getUploadModalID()).fadeOut(500)},zce.newActionErrorCallback=function(data){alert(JSON.stringify(data))},zce.removeActionErrorCallback=function(data){alert(JSON.stringify(data))},zce.uploadActionErrorCallback=function(data){"hideLoading"in zce.getConfig()&&zce.getConfig().hideLoading(),alert(JSON.stringify(data))},zce.testActionSuccessCallback=function(data){alert(JSON.stringify(data))},zce.saveActionSuccessCallback=function(data){zce.setOldTextContent(zce.getEditorData()),"true"===zce.tabs&&zce.dataInfo.set(zce.getSelectedFile(),zce.getEditorData())},zce.saveActionErrorCallback=function(data){alert(JSON.stringify(data))},zce.testActionErrorCallback=function(data){alert(JSON.stringify(data))},zce.deployActionSuccessCallback=function(data){var dd=JSON.parse(data);zce.setAPIHook(dd.data.apihook)},zce.deployActionErrorCallback=function(data){alert(JSON.stringify(data))},zce.setErrorEditorContentCallback=function(data){"readyErrorCallback"in zce.getConfig()&&zce.getConfig().readyErrorCallback()},zce.setErrorExplorerDataCallback=function(data){alert("Function files are not loaded")},zce.zceGetUrl=function(params,url,scallback,ecallback){$.ajax({type:"GET",url:url,data:params,success:scallback,error:ecallback})},zce.zceGetCookieValue=function(a){var b=document.cookie.match("(^|[^;]+)\\s*"+a+"\\s*=\\s*([^;]+)");return b?b.pop():""},zce.zcePostUrl=function(url,scallback,ecallback,params){$.ajax({type:"POST",url:url,data:params,success:scallback,error:ecallback})},zce.removeFunctionFiles=function(fileNameArg){var data=zce.getConfig(),url=zce.getAppDomain()+zce.getOrgInfo()+"/zce/function/removeFile",params="functionName="+data.data.editor.FUNCTIONNAME+"&repositoryName="+data.data.editor.REPOSITORYNAME+"&fileName="+fileNameArg;params+="&"+zce.getCSRFParamName()+"="+zce.zceGetCookieValue(zce.getCSRFCookieName()),zce.zcePostUrl(url,data.actions.removeFiles.success,data.actions.removeFiles.error,params)},zce.UploadMethod=function(){var data=zce.getConfig(),url=zce.getAppDomain()+zce.getOrgInfo()+"/zce/function/uploadFiles?functionName="+data.data.editor.FUNCTIONNAME+"&repositoryName="+data.data.editor.REPOSITORYNAME+"&parentPath="+zce.getSelectedFolder(),filelist=document.getElementById("uploadFileButton").files.length;if(filelist<=0){var response={error:"File field is mandatory"};data.actions.uploadFiles.error(response)}else{for(var x=0;x<filelist;x++){if(10<document.getElementById("uploadFileButton").files[x].size/1024/1024)return(response={}).error=document.getElementById("uploadFileButton").files[x].name+" exceeds the maximum limit of 10MB ",void data.actions.uploadFiles.error(response);zce.getSelectedFolder()+"/"+document.getElementById("uploadFileButton").files[x].name===zce.getSelectedFile()&&zce.setOpenNewFile(zce.getSelectedFolder()+"/"+document.getElementById("uploadFileButton").files[x].name)}zce.zcePostFilestUrl(url,data.actions.uploadFiles.success,data.actions.uploadFiles.error),"showLoading"in zce.getConfig()&&zce.getConfig().showLoading()}},zce.createFileMethod=function(){var data=zce.getConfig(),fileNameParam=$("#createNewFileName").val(),parentPathParam=zce.getSelectedNode().parent,selectedNode=zce.getSelectedNode();!0===selectedNode.original.isDirectory?parentPathParam=zce.getSelectedFolder():"#"===(parentPathParam=selectedNode.parent)?parentPathParam=".":selectedNode.original.fullPath.includes("/")&&(parentPathParam=selectedNode.original.fullPath.slice(0,selectedNode.original.fullPath.lastIndexOf("/")));var params={functionName:data.data.editor.FUNCTIONNAME,repositoryName:data.data.editor.REPOSITORYNAME,fileName:fileNameParam,parentPath:parentPathParam},url=zce.getAppDomain()+zce.getOrgInfo()+"/zce/function/createFile";"."===parentPathParam?zce.setNewFile(fileNameParam):zce.setNewFile(parentPathParam+"/"+fileNameParam),zce.zceGetUrl(params,url,data.actions.createFile.success,data.actions.createFile.error)},zce.zcePostFilestUrl=function(url,scallback,ecallback){var formData=new FormData,filelist=document.getElementById("uploadFileButton").files.length;formData.append(zce.getCSRFParamName()+"",zce.zceGetCookieValue(zce.getCSRFCookieName())+"");for(var x=0;x<filelist;x++)formData.append("file",document.getElementById("uploadFileButton").files[x]);$.ajax({url:url,data:formData,cache:!1,processData:!1,contentType:!1,type:"POST",success:scallback,error:ecallback})},zce.getFunctionFileContent=function(fileNameParam,scallback,ecallback){var data=zce.getConfig(),params={functionName:this.editorData.FUNCTIONNAME,repositoryName:this.editorData.REPOSITORYNAME,fileName:fileNameParam};"isDeployed"in data&&(params.isDeployed=data.isDeployed);var url=zce.getAppDomain()+this.orgID+"/zce/function/code";zce.zceGetUrl(params,url,scallback,ecallback)},zce.setFunctionFileList=function(successCallback,errorCallback){var data=zce.getConfig(),params={functionName:this.editorData.FUNCTIONNAME,repositoryName:this.editorData.REPOSITORYNAME};"isDeployed"in data&&(params.isDeployed=data.isDeployed);var url=zce.getAppDomain()+this.orgID+"/zce/function/getFileList";zce.zceGetUrl(params,url,successCallback,errorCallback)},zce.getEditorData=function(){return this.editor.getValue()},zce.setEditorData=function(data){this.editor.setValue(data)},zce.getExplorerData=function(){return this.explorerData},zce.getTestAreaData=function(){var data=zce.getConfig();return"args"in data.actions?data.actions.args.custom(JSON.parse(this.testarea.getValue())):JSON.parse(this.testarea.getValue())},zce.setTestAreaData=function(data){this.testarea.getDoc().setValue(data)},zce.setAPIHook=function(data){this.apihook=data},zce.getAPIHook=function(){return this.apihook},zce.setExplorerData=function(data){var myTree="#"+this.config.bindExplorer,myTreeSearch="#"+this.config.bindSearchExplorer,dd=data;this.explorerData=data;var configData=zce.getConfig(),dataTree={};dataTree="isDeployed"in configData&&configData.isDeployed?{types:{default:{icon:"icon-f-close"},"f-open":{icon:"icon-f-open"},"f-closed":{icon:"icon-f-close"}},plugins:["types","search","sort"],core:{data:dd.data.functionFiles},sort:function(a,b){return a1=this.get_node(a),b1=this.get_node(b),a1.icon==b1.icon?a1.text.toLowerCase()>b1.text.toLowerCase()?1:-1:customSort(a1.text)>customSort(b1.text)?1:-1},search:{show_only_matches:!0}}:"tabs"in configData&&"true"===zce.config.tabs?{sort:function(a,b){return a1=this.get_node(a),b1=this.get_node(b),a1.icon==b1.icon?a1.text.toLowerCase()>b1.text.toLowerCase()?1:-1:customSort(a1.text)>customSort(b1.text)?1:-1},contextmenu:{items:zce.customMenu},types:{default:{icon:"icon-f-close"},"f-open":{icon:"icon-f-open"},"f-closed":{icon:"icon-f-close"}},plugins:["contextmenu","types","search","sort"],core:{data:dd.data.functionFiles},search:{show_only_matches:!0}}:{sort:function(a,b){return a1=this.get_node(a),b1=this.get_node(b),a1.icon==b1.icon?a1.text.toLowerCase()>b1.text.toLowerCase()?1:-1:customSort(a1.text)>customSort(b1.text)?1:-1},contextmenu:{items:zce.customMenu},conditionalselect:function(node,event){return zce.getOldTextContent()===zce.getEditorData()||("saveContentCallback"in zce.getConfig()&&zce.getConfig().saveContentCallback(),!1)},types:{default:{icon:"icon-f-close"},"f-open":{icon:"icon-f-open"},"f-closed":{icon:"icon-f-close"}},plugins:["contextmenu","conditionalselect","types","search","sort"],core:{data:dd.data.functionFiles},search:{show_only_matches:!0}},$(myTree).jstree("destroy"),$(function(){$(myTree).jstree(dataTree);var to=!1;$(myTreeSearch).keyup(function(){to&&clearTimeout(to),to=setTimeout(function(){var v=$(myTreeSearch).val();$(myTree).jstree(!0).search(v)},250)}),$(myTree).on("loaded.jstree",function(){null!=zce.getSelectedNode()&&(null!==zce.getOpenNewFile()?(getNodeId(zce.getOpenNewFile()),zce.setOpenNewFile(null)):getNodeId(zce.getSelectedFile()),$(myTree).jstree("open_all"))}),$(myTree).on("changed.jstree",function(e,data){}),$(myTree).on("select_node.jstree",function(e,data){!1===zce.isUnsupportedFileExtensions(data.node.original.fullPath)&&!1===data.node.original.isDirectory?(zce.getFunctionFileContent(data.node.original.fullPath,"true"===zce.getConfig().tabs?zce.setEditorContentCallbackToHandletabs:zce.setEditorContentCallback,zce.setErrorEditorContentCallback),zce.setSelectedFile(data.node.original.fullPath)):!0===zce.isUnsupportedFileExtensions(data.node.original.fullPath)||!0===data.node.original.isDirectory?zce.setSelectedFolder(data.node.original.fullPath):zce.setSelectedFile(data.node.original.fullPath),zce.setSelectedNode(data.node)}),$("button").on("click",function(){$(myTree).jstree(!0).select_node("child_node_1"),$(myTree).jstree("select_node","child_node_1"),$.jstree.reference(myTree).select_node("child_node_1")}),$(myTree).on("open_node.jstree",function(event,data){data.instance.set_type(data.node,"f-open")}),$(myTree).on("close_node.jstree",function(event,data){data.instance.set_type(data.node,"f-closed")})})},zce.getFuncTemplate=function(lang,funcName,funcType){switch(lang){case 1:switch(funcType){case"BASICIO":return'module.exports = async function( context, basicIOObj )\n{\n\tbasicIOObj.write("test data");\n\tcontext.log("log data");\n}';case"HTTP":return"module.exports = function( context, streamsObj ) \n { \t var connect=context.getConnection(\"<YourConnectionName>\"); \n\t var twitteracc=connect.doGet('https://api.twitter.com/1.1/account/verify_credentials.json'); \n \t twitteracc.pipe(streamsObj.getOutputStream()); \n \t twitteracc.on('end',function(){ \n \t      context.close(); \n \t  }) \n }"}case 2:switch(funcType){case"BASICIO":return"import com.zoho.cloud.function.Context;\nimport com.zoho.cloud.function.basic.*;\n\npublic class "+funcName+' implements ZCFunction {\n\tpublic void runner(Context context, BasicIO basicIO) throws Exception {\n\tcontext.log("Log Data");\n\tbasicIO.write("TestData");\n\t}\n}';case"HTTP":return'import com.zoho.cloud.function.*; \nimport com.zoho.cloud.connector.*; \nimport org.apache.commons.io.IOUtils; \nimport com.zoho.cloud.function.http.*; \npublic class HTTPSkeleton implements ZCFunction { \n \t    public void runner(Context context, Streams streams) throws Exception { \n\t         Connector twitter = context.getConnection("AdhilTwitter"); \n        try { \n\t            String a = "https://api.twitter.com/1.1/statuses/update.json?status="+streams.getParameter("status").toString(); \n            ConnectorResponse \n \t resp=twitter.post(a,null); \n            int responseCode = resp.getResponseCode(); \n            if(responseCode<300) { \n \t                 IOUtils.copy( \n \t resp.getInputStream(), streams.getOutputStream()); \n                context.log( "success" ); \n            } \n \t             else { \n \t                 IOUtils.copy(resp.getErrorStream(), streams.getOutputStream()); \n                context.log( "error" ); \n            } \n \t         } catch (Exception e) { \n \t             streams.write(e.toString()); \n        } \n \t     } \n }'}case 3:switch(funcType){case"BASICIO":return'def runner( context, basicIO ):\n\tbasicIO.write( "TestData" )\n\tcontext.log( "log" )';case"HTTP":return"def runner( context, streams ): \n     twitter=context.getConnection(\"<YourConnectionName>\") \n     urltext='https://api.twitter.com/1.1/statuses/update.json?status='+streams.getParameter('status'); \n     statusupdate=twitter.doPost(urltext,streaming=True)    \n     f=streams.getOutputStream() \n     for chunk in statusupdate.iter_content(chunk_size=1024): \n          if chunk: # filter out keep-alive new chunks \n             f.write(chunk) \n    context.log( \"log\" )"}case 4:switch(funcType){case"BASICIO":return'package main \n import "zohofunction" \n import "encoding/json" \n type MyInput struct { \n         Name string `json:"name"` \n } \n \n func functionName(c zohofunction.Context, st string){ \n    var my MyInput \n    json.Unmarshal([]byte(st),&my) \n    c.Write(my.Name) \n    c.Log("This is log..") \n } \n func main(){ \n  zohofunction.Runner(functionName) \n } ';case"HTTP":return'package main \n \n import ( \n \t    "zohocloud/function" \n \t     "zohocloud/function/streams" \n ) \n \n func functionName(c *function.Context, stream *streams.Streams) { \n \t    stream.GetOutputStream().Write([]byte( \n \t stream.GetParameter("test"))) \n \t } \n \n func main() { \n \t     streams.Runner(functionName) \n }'}}},zce.customMenu=function(node){return!1===node.original.isDirectory?{item1:{label:"New File",action:function(){zce.showUploadModal("new")}},item2:{label:"Remove File",action:function(){"true"===zce.getConfig().tabs&&(zce.setFileToBeRemoved(node.original.fullPath),zce.setIsDirectory(node.original.isDirectory)),zce.removeFunctionFiles(node.original.fullPath)}}}:{item1:{label:"Upload Files",action:function(){zce.showUploadModal("upload")}},item2:{label:"New File",action:function(){zce.showUploadModal("new")}},item3:{label:"Remove File",action:function(){"true"===zce.getConfig().tabs&&(zce.setFileToBeRemoved(node.original.fullPath,node.original.isDirectory),zce.setIsDirectory(node.original.isDirectory)),zce.removeFunctionFiles(node.original.fullPath)}}}},zce.defaultSaveContentCallback=function(){alert("You have unsaved changes...Save and continue")},zce.initUploadModal=function(modalID){var modelHtmlWithStack=zce.getModalHtml().replace("$1",zce.getAllowedFileTypes(zce.getConfig().data.editor.ZCLOUDSTACKID));document.getElementById(modalID).innerHTML=modelHtmlWithStack,$(document).keydown(function(e){27==e.keyCode&&$("#"+modalID).fadeOut(500)});var modal=document.getElementById(modalID);document.getElementById("zceclose").onclick=function(){modal.style.display="none"}},zce.showUploadModal=function(modalType){var dd=zce.getConfig();switch(modalType){case"upload":var modelHtmlWithStack=zce.getModalHtml().replace("$1",zce.getAllowedFileTypes(zce.getConfig().data.editor.ZCLOUDSTACKID));document.getElementById(zce.getUploadModalID()).innerHTML=modelHtmlWithStack,document.getElementById(dd.actions.uploadFiles.id).onclick=dd.actions.uploadFiles.callback;break;case"new":document.getElementById(zce.getUploadModalID()).innerHTML=zce.getNewFileModalHtml(),$("#createNewFileName").keydown(function(e){13==e.keyCode&&dd.actions.createFile.callback()}),document.getElementById(dd.actions.createFile.id).onclick=dd.actions.createFile.callback}var modal=document.getElementById(zce.getUploadModalID());document.getElementById("zceclose").onclick=function(){modal.style.display="none"},modal.style.display="block"},zce.getUploadModalID=function(){return zce.getConfig().bindUploadModal},zce.postFormCORS=function(url,formData,scallback,ecallback){var xhr=zce.createXhr("POST",url,!0);xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status?scallback(xhr.responseText):ecallback(xhr.responseText))},xhr.send(formData)},zce.defaultSaveCallback=function(){var data=zce.getConfig(),formData=new FormData;void 0!==data.data.editor.ZCLOUDRESOURCEID?formData.append("functionID",data.data.editor.ZCLOUDRESOURCEID):(formData.append("functionName",data.data.editor.FUNCTIONNAME),formData.append("repositoryName",data.data.editor.REPOSITORYNAME)),formData.append("code",zce.getEditorData()),formData.append("fileName",zce.getSelectedFile()),formData.append(zce.getCSRFParamName()+"",zce.zceGetCookieValue(zce.getCSRFCookieName())+"");var url=zce.getAppDomain()+zce.getOrgInfo()+"/zce/function/update";zce.postFormCORS(url,formData,data.actions.save.success,data.actions.save.error)},zce.defaultTestCallback=function(){var args={},data=zce.getConfig();"bindTestArea"in data?args=zce.getTestAreaData():"args"in data.actions&&(args=data.actions.args.custom(args));var env=[{name:"arg1",value:"arg1value"}],params="";params=void 0!==data.data.editor.ZCLOUDRESOURCEID?"functionID="+data.data.editor.ZCLOUDRESOURCEID+"&args="+JSON.stringify(args)+"&env="+JSON.stringify(env):"functionName="+data.data.editor.FUNCTIONNAME+"&repositoryName="+data.data.editor.REPOSITORYNAME+"&args="+JSON.stringify(args)+"&env="+JSON.stringify(env),params+="&"+zce.getCSRFParamName()+"="+zce.zceGetCookieValue(zce.getCSRFCookieName());var url=zce.getAppDomain()+zce.getOrgInfo()+"/zce/function/execute";zce.zcePostUrl(url,data.actions.test.success,data.actions.test.error,params)},zce.defaultDeployCallback=function(){var data=zce.getConfig(),params="";params=void 0!==data.data.editor.ZCLOUDRESOURCEID?"functionID="+data.data.editor.ZCLOUDRESOURCEID:"functionName="+data.data.editor.FUNCTIONNAME+"&repositoryName="+data.data.editor.REPOSITORYNAME,params+="&"+zce.getCSRFParamName()+"="+zce.zceGetCookieValue(zce.getCSRFCookieName());var url=zce.getAppDomain()+zce.getOrgInfo()+"/zce/microservice/deploy";zce.zcePostUrl(url,data.actions.deploy.success,data.actions.deploy.error,params)},zce.defaultAPIHookCallback=function(){return zce.getAPIHook()},zce.getOrgInfo=function(){return this.orgID},zce.setDefaultActions=function(actionConfig){"save"in actionConfig&&(document.getElementById(actionConfig.save.id).onclick=actionConfig.save.callback),"test"in actionConfig&&(document.getElementById(actionConfig.test.id).onclick=actionConfig.test.callback),"deploy"in actionConfig&&(document.getElementById(actionConfig.deploy.id).onclick=actionConfig.deploy.callback)},zce.getConfig=function(){return this.config},zce.init=function(config){if(this.editorData=config.data.editor,this.config=config,this.appDomain="appDomain"in config?config.appDomain:location.protocol+"//"+location.host+"/",this.orgID=config.orgInfo,"staticDomain"in config&&(this.staticDomain=config.staticDomain),"staticDomainVersion"in config&&(this.staticDomainVersion=config.staticDomainVersion),"tabs"in config&&(this.tabs=config.tabs),"true"===zce.tabs){document.getElementById(zce.getConfig().bindTabs);var element=document.createElement("ul");element.id="tabId",document.getElementById(zce.getConfig().bindTabs).appendChild(element),this.modelInfo=new Map,this.dataInfo=new Map,this.stateInfo=new Map,this.editorOptions={model:null,theme:editorthemes,automaticLayout:!0,formatOnPaste:!0,minimap:{enabled:0!=zce.config.editorMinimap}}}else this.editorOptions={value:"",language:zce.getCodeMirrorMode(config.data.editor.ZCLOUDSTACKID),theme:editorthemes,automaticLayout:!0,formatOnPaste:!0,minimap:{enabled:0!=zce.config.editorMinimap}};var tmonacoeditor=null,editorthemes="vs";if("editorTheme"in config&&(editorthemes=config.editorTheme),this.setFunctionName(config.data.editor.FUNCTIONNAME+zce.getFileExtension(config.data.editor.ZCLOUDSTACKID)),require.config({paths:{vs:this.staticDomain+this.staticDomainVersion+"/js/monaco-editor/min/vs"}}),require(["vs/editor/editor.main"],function(){tmonacoeditor=monaco.editor.create(document.getElementById(config.bindEditor),zce.editorOptions),zce.setEditor(tmonacoeditor),zce.getFunctionFileContent(config.data.editor.FUNCTIONNAME+zce.getFileExtension(config.data.editor.ZCLOUDSTACKID),"true"===zce.tabs?zce.setEditorContentCallbackToHandletabs:zce.setEditorContentCallback,zce.setErrorEditorContentCallback),zce.setSelectedFile(config.data.editor.FUNCTIONNAME+zce.getFileExtension(config.data.editor.ZCLOUDSTACKID)),"isDeployed"in config&&config.isDeployed&&zce.getEditor().updateOptions({readOnly:!0})}),this.initUploadModal(config.bindUploadModal),this.setFunctionFileList(zce.setExplorerDataCallback,zce.setErrorExplorerDataCallback),this.setDefaultActions(config.actions),"serviceCSRFName"in config&&(this.csrfCookieName=config.serviceCSRFName+""),"serviceCSRFParamName"in config&&(this.csrfParamName=config.serviceCSRFParamName+""),"bindTestArea"in config){var tArea=document.getElementById(config.bindTestArea),mytArea=CodeMirror.fromTextArea(tArea,{lineNumbers:!0,mode:"javascript",matchBrackets:!0,lineNumbers:!0,lineWrapping:!0,styleActiveLine:!0,styleActiveSelected:!0});mytArea.getDoc().setValue(JSON.stringify({key1:"value1",key2:"value2",key3:"value3"})),this.testarea=mytArea}},zce.defaultReadyCallback=function(){},zce.defaultReadyErrorCallback=function(){alert("The selected file is not editable")},zce.getFileExtension=function(lang){switch(lang){case 1:return".js";case 2:return".java";case 3:return".py";case 4:return".go"}},zce.getCodeMirrorMode=function(lang){switch(lang){case 1:return"javascript";case 2:return"java";case 3:return"python";case 4:return"go"}},zce.getAllowedFileTypes=function(lang){switch(lang){case 1:return".js";case 2:return".jar,.class,.java";case 3:case 4:return"text/*"}},zce.isUnsupportedFileExtensions=function(filename){switch(filename.substr(filename.lastIndexOf(".")+1).toLowerCase()){case"jar":case"class":case"zip":case"tar":return!0;default:return!1}},zce.defaultShowLoading=function(){},zce.defaultHideLoading=function(){},zce.defaultExecuteCallback=function(){},zce.defaultUpdateCallback=function(orgInfo,functionId){},zce.defaultSaveCallbackPrelimCheck=function(){"tabs"in zce.getConfig()&&"true"===zce.getConfig().tabs?0<zce.modelInfo.size&&zce.getEditorData()!==zce.dataInfo.get(zce.getSelectedFile())&&zce.defaultSaveCallback():zce.getOldTextContent()!==zce.getEditorData()&&zce.defaultSaveCallback()},zce.isAllowedFileExtensions=function(fileName){if(-1==fileName.lastIndexOf("."))return!1;switch(fileName.slice(fileName.lastIndexOf(".")+1,fileName.length)){case"js":case"java":case"go":case"py":case"txt":case"json":case"conf":case"html":case"css":return!0;default:return!1}};