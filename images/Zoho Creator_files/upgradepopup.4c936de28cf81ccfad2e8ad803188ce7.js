var Upgrade=new function(){this.sharedByDisp="";this.redirectUpgradePage=function(c,b){var e={};void 0!==c&&(e.subscriptionaccessfrom=c);showLoading();$.ajax({type:"GET",url:"/userhome/"+Upgrade.sharedByDisp+"/showPlan",data:e,success:function(a,c,d){hideLoading();b?window.open(a.storeurl,"_blank"):window.location.href=a.storeurl}})};this.redirectToUpgradePage=function(c,b,e){if(ZCGlobal.isOnPremiseVersion)getLicenseContent();else{var a={};void 0!==b&&(a.subscriptionaccessfrom=b);a.fromupgradepopup=
!0;$.ajax({type:"GET",beforeSend:function(){e?LIB._startLoading():showLoading()},url:"/userhome/"+c+"/showPlan",data:a,success:function(a,c,b){e?LIB._stopLoading():hideLoading();window.location.href=a.storeurl}})}};this.upgradePopup=function(c){if(""==getCookie(c+"-upgradeprompt")){var b=new Date;b.setDate(b.getDate()+15);c+="-upgradeprompt";b=escape("true")+";expires\x3d"+b.toUTCString()+";path\x3d/";document.cookie=c+"\x3d"+b;$("body").freeze(function(c){c.append('\x3cdiv class\x3d"upgrade-container"\x3e\x3cdiv class\x3d"upgrade-header"\x3e\x3cdiv class\x3d"content-heading pull-left"\x3e'+
i18n["zc.onboarding.upgradeheading"]+'\x3c/div\x3e\x3cdiv class\x3d"flRight appNameClose"\x3e\x3ca id\x3d"upgradeClose" class\x3d"CrepopupClose" href\x3d"javascript:;"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"upgrade-content"\x3e\x3cp\x3e'+i18n["zc.onboarding.upgradedesc1"]+"\x3cp\x3e"+i18n["zc.onboarding.upgradedesc2"]+'\x3c/p\x3e\x3c/div\x3e\x3cdiv class\x3d"upgrade-footer"\x3e\x3ca class\x3d"btn primary-btn" zctlbl\x3d"reminder-popup-dashboard" href\x3d"javascript:void(0);" onclick\x3d"Upgrade.redirectUpgradePage(\'FREE_UPGRADE_POPUP\');"\x3e'+
i18n["zc.onboarding.upgradebutton"]+"\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e");$(".upgrade-container").find("a#upgradeClose").click(function(a){$("body").unfreeze();a.preventDefault()});$(c).find(".upgrade-container").animate({top:0},1E3)})}}};
$.upgradepopup={_p:"",create:function(c){function b(){this.settings=void 0==c?{}:c;this.freezer=this.popup=null}var e=void 0!==c.type?c.type:"addons";b.prototype.open=function(){var a=this,b=function(c){zs_store=function(){return{onSuccess:function(b){var d=b[c];b=a.settings.previousCount+d;"files"===a.settings.action&&(b=3072*d+a.settings.previousCount/1048576);d={status:"success"};d.maximumCount=b;d.currentCount=a.settings.currentCount;d.action=a.settings.action;a.settings.success(d);$.upgradepopup.remove()},
onCancel:function(){$.upgradepopup.remove()}}}()};void 0===a.settings.sharedby?$.error("Syntax Error :  Usage :- \n$.upgradepopup.create({\n\taction: addon name (TEXT),\n\tsharedby: sharedBy,\n\tdata: Ajax request extra params [csrf]\n});"):(a.settings.data=void 0===a.settings.data?{}:a.settings.data,a.settings.upgradeType=void 0===a.settings.upgradeType?"addons":a.settings.upgradeType,a.settings.action=void 0===a.settings.action?"users":a.settings.action,a.settings.isEditMode=void 0===a.settings.isEditMode?
!1:!0,a.settings.trackingpage=a.settings.action+"-"+a.settings.currentpage,a.settings.isTemplate=!0,a.settings.isDashboard=void 0===a.settings.isDashboard?!1:a.settings.isDashboard);(function(){a.settings.data.zcaction=a.settings.action;a.settings.data.type=e;a.settings.data[a.settings.secretKey]=a.settings.secretVal;$.ajax({url:"/userhome/"+a.settings.sharedby+"/upgradepopup",type:"POST",data:a.settings.data,success:function(d,e,f){void 0!==d.result?"success"===d.result?(a.popup=$('\x3cdiv class\x3d"zs_widget zc-dem-store-upgradepopup"\x3e\x3c/div\x3e'),
a.settings.isTemplate=1===$(a.popup).find(".pricing_upgrade_outer_table").length,a.settings.successLabel=d.label,a.settings.title=d.title,a.settings.message=d.message,a.settings.previousCount=d.previousCount,a.settings.currentCount=d.currentCount,$(a.popup).show(),a.freezer=$.upgradepopup.freeze(a.settings.isEditMode,a.settings.isDashboard).append(a.popup),e={serviceId:901,customId:d.customid,secretKey:a.settings.secretKey,secretVal:a.settings.secretVal,itemList:[{code:d.code,action:"upgrade",type:a.settings.upgradeType}],
settings:{upgradeTitle:a.settings.title,upgradeInfo:a.settings.message,successTitle:"License Upgraded Successfully",successActionLabel:a.settings.successLabel,successSecondaryAction:"disable"}},void 0!=d.discountArr&&0<d.discountArr.length&&(f={},f.discounts=d.discountArr,f.title="Special year-end offer",e.settings.applyPromotion=f,e.settings.onFailure="closePopup"),zs_widget.init(e),b(d.code)):"redirection"===d.result?isCreatorPlusAcc?window.open(d.storeurl,"_blank"):window.location.href=d.storeurl:
void 0!==a.settings.template&&"skip"!==d.result&&a.settings.template():void 0!=d&&(void 0!==a.settings.template?a.settings.template():(iCustomizePopup({body:d,containerClass:"zc-dem-upgrade-plan",parentClass:"zc-dem-upgrade-popup-container"}),c.isDashboard||$(".zc-dem-upgrade-popup-wrapper").zcScrollPane({autoReinit:!0}),void 0!=c.successCallBk&&c.successCallBk()))}})})()};b.prototype.load=function(a){a?$(this.popup).find(".upgradeloading").show():$(this.popup).find(".upgradeloading").hide()};b.prototype.close=
function(){void 0!==this.settings.close&&this.settings.close();$(this.popup).find(".upgradeloading").hide();$.upgradepopup.defreeze(this.freezer)};_p=new b;_p.open()},freeze:function(c,b){b?b=$('\x3cdiv class\x3d"upgradepopup_zcOverlay"\x3e\x3cdiv class\x3d"upgradepopup_centerLay"\x3e\x3c/div\x3e\x3c/div\x3e'):(b=$('\x3cdiv class\x3d"upgradepopup_zcOverlay"\x3e\x3cdiv class\x3d"upgradepopup_leftLay"\x3e\x3c/div\x3e\x3cdiv class\x3d"upgradepopup_topLay"\x3e\x3c/div\x3e\x3cdiv class\x3d"upgradepopup_centerLay"\x3e\x3c/div\x3e\x3cdiv\x3e'),
c||$(b).find(".upgradepopup_leftLay").css("background","rgba(255, 255, 255, 0.38)"));$("body").append(b);$(b).fadeIn(400);return b},defreeze:function(c){$(c).fadeOut(400,function(){$(this).remove()})},remove:function(){void 0!=_p&&_p.close()},loading:function(c){void 0!=_p&&_p.load(c)},settings:function(){if(void 0!=_p)return _p.settings}};
$.upgrade={create:function(c){var b={};b.zcFeatureName=c.zcFeatureName;b.featureType=c.featureType;b.zccpn=c.zccpn;$.ajax({url:"/userhome/"+c.sharedBy+"/upgradepopup",type:"POST",beforeSend:showLoading(),data:b,success:function(b,a,g){hideLoading();void 0!=b&&(iCustomizePopup({body:b,containerClass:"zc-dem-upgrade-plan",parentClass:"zc-dem-upgrade-popup-container"}),c.isDashboard||$(".zc-dem-upgrade-popup-wrapper").zcScrollPane({autoReinit:!0}),void 0!=c.successCallBk&&c.successCallBk())}})}};